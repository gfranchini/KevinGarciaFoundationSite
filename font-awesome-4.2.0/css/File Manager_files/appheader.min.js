ux.eldorado=ux.eldorado||{},ux.eldorado.jQuery=ux.jQuery,ux.eldorado.util=function(a,b,c){function d(a){var b=j.getItem(a,"");return b?JSON.parse(decodeURI(b)):!1}function e(a,b){j.setItem(a,decodeURI(JSON.stringify(b)))}function f(a){j.removeItem(a)}function g(b,c){var d=a(b);c=c||"pc-qry";var e=d.data(c)||"";e.length>0&&(e="?"+e.replace(/^[&?]/,""));var f=d.data("pc-href")||d.attr("href");return f+e}function h(){var a=ux.util.cookie.readJson("info_idp");return null===a?c:("basic"===a.auth?a:a[a.auth]).info_shopperId}function i(){return ux.sid||h()}var j=new ux.util.storage({cookiesDisabled:!0});return{getStorageItem:d,setStorageItem:e,removeStorageItem:f,getPCQryUrl:g,getSID:i}}(ux.eldorado.jQuery,_),ux.eldorado.delegationUI=function(a,b,c,d){function e(a,b,c,d){if(c&&b&&0!==a.length){var e,f=a.find(".acct-delegate-text");f.data("template")||f.data("template",f.html()),e=f.data("template"),e=ux.eldorado.shopperUI.renderName(e,"{1}","{2}",c),f.html(e.replace("{0}",b.displayName?b.displayName:b.firstName)),f[d===!0?"addClass":"removeClass"]("refreshed"),a.show()}}function f(b,c,d,f){var h=a("#uxh-acct-delegate");if(0!==h.length)if("customer c3 both".indexOf(b)>-1){var i="both customer".indexOf(b)>-1?"-cust":"-rep";e(h.find(".delegate"+i),c,d,f),"both".indexOf(b)>-1&&(e(h.find(".delegate-rep"),c.del,c,f),h.addClass("delegate-db-shim")),"-rep"===i&&g(d),h.show()}else h.hide()}function g(a){var b=window.document.title,c=b.indexOf("]");b=c>-1?b.substr(c+2):b,window.document.title="["+a.shopperId+"] "+b}function h(){m===!0&&d.turnOffTabFocusCheck(),d.turnOnTabFocusCheck({callback:function(a,b,c,d){l&&f(a,b,c,d)}}),m=!0}function i(){a("#exit-delegation-link").on("click",function(){var b=a(this),c=a('<form id="del-switchback" method="POST" style="display:none;"><input type="hidden" name="secret" /></form>').appendTo(document.body);c.attr("action",b.attr("data-action")),c.find("input").attr("value",b.attr("data-sk")),c.submit()})}function j(a,b,c){var e=ux.eldorado.delegationUI,f=function(){_.isFunction(c)&&c(a),e.initBars(!0),e.initTabFocusAuth(),e.initHeader()};d.init(a,b,f)}function k(a){l=!(a===!1),f(d.delegationType(),d.delegateInfo(),d.customerInfo()),l===!0&&h(),i()}var l=!0,m=!1;return{init:j,initBars:k,initTabFocusAuth:function(){h()},initHeader:function(){"customer c3 both".indexOf(d.delegationType())>-1&&a(".uxh-no-delegate").hide()}}}(jQuery,ux.i18n.header,ux.util,ux.acctDelegation),ux.eldorado.shopperUI=function(a,b){function c(a,b,c,d){d=d||ux.acctDelegation.customerInfo();var e="undefined"!=typeof d.displayName;return e&&a.indexOf(c)<a.indexOf(b)&&(a=a.replace(/(\{2\},? ?)\{/,"{")),a.replace(b,e?d.displayName:d.firstName).replace(c,e?"":d.lastName)}function d(a){b.isFunction(a)&&(f=a)}function e(a){f(a)}var f=function(){};return{init:d,update:e,renderName:c}}(jQuery,_),ux.eldorado.thirdParty=function(a,b){function c(a){!a||!a.js||ux.disable&&ux.disable.tealium===!0||b.load.script({url:a.js,preLoad:function(){var a=window;a.utag_data=a.utag_data||{},a.utag_data.pl_id=ux.eldorado.data.plId,a.utag_data.shopper_id=ux.eldorado.data.shopperId,a.utag_data.app_name=ux.eldorado.data.app,_.extend(a.utag_data,ux.utagconfig)}})}function d(c){c&&c.js&&c.css&&(!ux.disable||ux.disable.livePerson!==!0)&&b.load.files([{typ:"script",url:c.js,preLoad:function(){a("body").append(a('<div id="lpButtonDiv"></div>'))},when:"documentReady",postLoad:function(){ux.util.bs.breakpoints.onChange(function(b){a("#chat-popup").css("display","xs"===b?"none":"")})}},{typ:"css",url:c.css,when:"documentReady"}])}function e(a){ux.disable&&ux.disable.ga===!0||b.load.script({url:"//www.googletagmanager.com/gtm.js?id="+a+"&l=_gaDataLayer",preLoad:function(){var a=window,b="_gaDataLayer";a[b]=a[b]||[],a[b].push({"gtm.start":(new Date).getTime(),event:"gtm.js"})},attrs:{async:!0},anchor:document.getElementsByTagName("script")[0],where:"before"})}function f(a){if(!ux.disable||ux.disable.ga!==!0){var b=window,c=_.union(a.data,ux.gaconfig||[]);b._gaDataLayer=b._gaDataLayer||[];for(var d=0,e=c.length;e>d;d++)b._gaDataLayer.push(c[d]);b._gaq=b._gaq||[],b._gaq.push(["_setDomainName",a.domain])}}return{initTealium:c,initLivePerson:d,initGATagManager:e,configGATagManager:f}}(jQuery,ux.util),ux.eldorado.cart=function(a){function b(a){var b=isNaN(a)?isNaN(a.carttotal)?0:a.carttotal:a;return d.itemCount=b,c(b),b}function c(b){var c=0>=b,d=a("#cart-link a, #uxh-cart-link a, #uxh-cart-link-mobile a, .nav-cart a"),e=(c?"is":"not")+"-empty",f=(c?"not":"is")+"-empty";d.removeClass(f).addClass(e).parent().removeClass(f).addClass(e),d.find("span."+f).hide(),d.find("span."+e).html((d.data("content-"+e)||"").toString().replace("{total}",b)).show()}var d={itemCount:0};return{update:b,getItemCount:function(){return d.itemCount}}}(ux.eldorado.jQuery,_),ux.eldorado.ssoLinks=function(a){function b(){var b=a("#uxh-nav-logged-out a, #uxh-nav-logged-in a, #uxh-nav-logout-link");0!==b.length&&b.each(function(){var b=a(this),c=ux.eldorado.data.context.isgd?"www":"mya",d=b.attr("href").replace(decodeURIComponent(ux.eldorado.data.tokens.loginApp),c).replace(decodeURIComponent(ux.eldorado.data.tokens.loginPath),"");b.attr("href",d)})}return{init:b}}(jQuery),ux.eldorado.inappHelp=function(a,b,c,d){function e(){b.data.inappHelpSupported&&(a("#help-link").click(m),a("#uxh-nav-support").click(m),a("body").on("mouseup",s).on("mousemove",t),a(window).on("resize",i).on("beforeunload",n),ux.eldorado.ready(function(){q()&&g()}))}function f(c,d){var e=a('<div class="ux-help-container" />'),f=a('<div class="ux-help-panel ux-help-positioned" />'),g=a('<div class="ux-help-title-bar" />'),j=a('<div class="headline-primary" />'),k=a('<div class="uxicon uxicon-x" />'),l=a('<iframe class="ux-help-content" frameBorder="0" />');return d||(d=b.texts.inappHelpTitle),k.on("click touchstart",h),e.on("mousedown",r).on("touchstart",u).on("touchmove",v).on("touchend",w),l.attr("src",c),j.text(d),g.append(j).append(k),e.append(f),f.append(g),f.append(l),a(document.body).append(e),i(),e}function g(){var a=p();a&&(f(c.replaceQSValue("last","true",a.url)),k(a.x,a.y),j(a.height))}function h(){a(".ux-help-container").remove(),o()}function i(){k(),j()}function j(b){var c=a(".ux-help-container");if(0!==c.length){var d=c.find(".ux-help-panel"),e=d.find(".ux-help-content"),f=0;a.isNumeric(b)||(b=a(window).height()-parseInt(c.css("top"),10)-D),E>b&&(b=E),f=b-c.height(),e.height(e.height()+f),d.height(d.height()+f),c.height(c.height()+f)}}function k(b,c){var d=a(".ux-help-container");0!==d.length&&(a.isNumeric(b)||(b=a(window).width()-d.width()-C,A>b&&(b=A)),a.isNumeric(c)||(c=B),d.css({left:b,top:c}))}function l(){var a=ux.util.bs.breakpoints.current();return"lg"===a||"md"===a}function m(){var b=a(this).find("a"),d=c.replaceQSValue("inapp","true",b.attr("href"));return l()?(f(d),!1):void 0}function n(){var b=a(".ux-help-container");if(0!==b.length){var c=window.location.host,d=(b.position(),b.find("iframe").attr("src")),e=+new Date,f={timestamp:e,host:c,url:d,x:parseInt(b.css("left"),10),y:parseInt(b.css("top"),10),height:b.height(),width:b.width()};G.setItem(H,JSON.stringify(f))}}function o(){G.removeItem(H)}function p(){var a=G.getItem(H);if(a)try{return JSON.parse(a)}catch(b){}return d}function q(){var a=p();if(!a||!a.url)return!1;var b=+new Date;return b-a.timestamp>F?!1:a.host!==window.location.host?!1:!0}function r(b){return y=b.pageX-b.currentTarget.offsetLeft,z=b.pageY-b.currentTarget.offsetTop,a(".ux-help-panel").addClass("ux-help-dragging").removeClass("ux-help-positioned"),x=!0,!1}function s(){return x?(a(".ux-help-panel").addClass("ux-help-positioned").removeClass("ux-help-dragging"),x=!1,!1):void 0}function t(b){return x?(a(".ux-help-container").css({left:b.pageX-y,top:b.pageY-z}),!1):void 0}function u(b){return y=b.originalEvent.touches[0].pageX-b.currentTarget.offsetLeft,z=b.originalEvent.touches[0].pageY-b.currentTarget.offsetTop,a(".ux-help-panel").addClass("ux-help-dragging").removeClass("ux-help-positioned"),x=!0,!1}function v(b){return x?(a(".ux-help-container").css({left:b.originalEvent.touches[0].pageX-y,top:b.originalEvent.touches[0].pageY-z}),!1):void 0}function w(){return x?(a(".ux-help-panel").addClass("ux-help-positioned").removeClass("ux-help-dragging"),x=!1,!1):void 0}var x=!1,y=-1,z=-1,A=100,B=50,C=0,D=50,E=350,F=1e4,G=new ux.util.storage,H="inapp-help-state";return{init:e,open:f,close:h,reopen:g,forgetState:o,rememberState:n,getStateData:p}}(jQuery,ux.eldorado,ux.util.url),ux.eldorado.footer=function(a){function b(){a(".ux-footer").css("height","auto");var b=a(".ux-footer").outerHeight();a("body").css("margin-bottom",b),a(".ux-footer").css("height",b)}function c(){a(document).ready(function(){a(".ux-footer").length>0&&a("html").addClass("ux-footer-html"),b(),a(window).resize(_.debounce(b,100))})}return{init:c,setHeight:b}}(jQuery,ux.util),ux.eldorado.header=function(a,b,c,d,e,f){function g(b,c,f,g){var i={},j="";v&&(i.shopper_id=c,i.mstk=f,j="shopper_id="+c+"&mstk="+f),g&&(i.prog_id=g,j+=(j.length>0?"&":"")+"prog_id="+g);var k=e.getSID(),l=b+"/pcjson/applicationheader/"+(k?"?sid="+k:"");a.ajax({contentType:"text/javascript; charset=utf-8",dataType:"jsonp",url:l,data:i,success:function(b){b=b||{},b.loggedIn="partial full manager".indexOf(b.status)>-1,b.shopperid&&b.shopperid.length>0?(y.shopperUI.init(function(b){h(a.extend(!0,{},w,b))}),"string"==typeof f&&f.length>0||d.init(b,l+(j.length>0?"?":"")+j,y.shopperUI.update)):h(b)},error:function(){h({loggedIn:!1})}})}function h(b){i(b.loggedIn),b.loggedIn&&(j(b),k(b),a("#uxh-s-header")[x.shopperInfo||x.shopperIcons?"show":"hide"]()),l(b),m(b)}function i(b){a("#uxh-nav-product")[b?"addClass":"removeClass"]("uxh-m-logged-in"),a(".uxh-logged-out")[b?"hide":"show"](),a(".uxh-logged-in")[b?"show":"hide"]()}function j(b){var c=decodeURIComponent(y.data.formats.sfullname),d=decodeURIComponent(y.data.formats.smenu),e=y.shopperUI.renderName(d,"{f}","{l}"),f=e===b.shopperid;a("#uxh-s-name-prefix")[f?"show":"hide"](),e.length>0&&a("#uxh-s-name").html(e),f||a("#uxh-s-fullname").text(y.shopperUI.renderName(c,"{f}","{l}")).show(),b.shopperid.length>0&&!f&&(a("#uxh-s-id").text(b.shopperid||""),a("#uxh-mi-custid").show()),b.mgrid.length>0&&b.mgrname.length>0&&(a("#uxh-mgr-id").text(b.mgrid||""),a("#uxh-mgr-name").text(b.mgrname||""),a("#uxh-mi-mgrid").show(),a("#uxh-mi-mgrname").show()),y.cart&&y.cart.update(b),x.shopperInfo=!f}function k(b){var c=!1;if(a("#uxh-s-status").empty(),b.pricetypes&&b.pricetypes.length>0){c=!0;for(var d=0,e=b.pricetypes.length;e>d;d++)a("#uxh-s-status").append(a("<span></span>").addClass("uxc-pt-icon uxc-pt-icon-"+b.pricetypes[d]))}b.vip&&(c=!0,a("#uxh-s-status").append(a("<span></span>").addClass("uxc-pt-icon uxc-pt-icon-vip")),a("#uxh-vip-info").show(),a("#uxh-vip-phone").text(b.vip.phone),a("#uxh-vip-email").attr("href","mailto:"+b.vip.email).text(b.vip.email),a("#uxh-vip-repname").text(b.vip.repname)),a("#uxh-s-status")[c?"show":"hide"](),x.shopperIcons=c}function l(b){x.productsMenu=u;var c=!1,d=a("#uxh-s-products");if(0!==d.length){var e=d.prev("a");if(b.loggedIn&&"true"===d.attr("data-showops").toLowerCase()||d.empty(),b.products&&b.products.length>0){var f=!1;for(var g in b.products){var h=b.products[g];h.key!==t?d.append(a("<li>").append(a("<a />").attr({role:"menuitem",href:h.url}).text(h.name))):(0===a("#uxh-product").text().length&&a("#uxh-product").text(h.name),f=!0)}x.productsMenu=c}c=u&&d.children().length>0,a("#uxh-products-arrow")[c?"show":"hide"](),d[c?"attr":"removeAttr"]("role","menu"),d[c?"addClass":"removeClass"]("dropdown-menu"),e[c?"attr":"removeAttr"]("data-toggle","dropdown"),e[c?"addClass":"removeClass"]("dropdown-toggle")}}function m(){var b=a("#uxh-i-server").text();a("#uxh-i-server")[b.length>0&&b.indexOf("{{")<=-1?"show":"hide"]()}function n(){var b=a("#uxh-nav-app-menu").find("li.active > a").filter(":last").text();a("#uxh-nav-app-caption").text(""==b?a("#uxh-nav-app-active").attr("data-default-caption"):b)}function o(){a("#uxh-nav-product").text(a("#uxh-product").text())}function p(){a("#uxh-nav-app-active").css("display",0===a("#uxh-nav-app-menu").find("li").length?"none":"")}function q(){a("#uxh-nav-app")[a("#uxh-nav-app-menu").find("li").length<2&&a("#uxh-nav-app").find(".navbar-nav").length<2?"addClass":"removeClass"]("navbar-nav-single-li")}function r(){a("#uxh-nav-collapse").on("show.bs.collapse",function(){a("#uxh-nav-app-collapse.in").collapse("hide"),a("[data-target=#uxh-nav-app-collapse]").addClass("collapsed")}),a("#uxh-nav-app-collapse").on("show.bs.collapse",function(){a("#uxh-nav-collapse.in").collapse("hide"),a("[data-target=#uxh-nav-collapse]").addClass("collapsed")})}function s(){function a(a){_.isFunction(a)&&a()}var b=y.fns;_.isArray(b)&&_(b.length).times(function(){a(b.pop())}),y.ready=a,delete y.fns}var t,u=!0,v=!1,w={name:"",username:"",fullname:"",shopperid:"",carttotal:0,mgrid:"",mgrname:""},x={shopperInfo:!0,shopperIcons:!0,ProductsMenu:!0},y=ux.eldorado;return{load:function(b,d,e,h,i){t=d;var j=!e||e.indexOf("pc:shopperid")>-1?f:e,k=!h||h.indexOf("pc:mstk")>-1?f:h;v="undefined"!=typeof j&&"undefined"!=typeof k,a(document).ready(function(){a("#uxh").length>0&&(g(b,j,k,i),y.ssoLinks&&y.ssoLinks.init(i),y.inappHelp&&y.inappHelp.init(),r(),c.bs.breakpoints.onXS(function(){p(),q(),n(),o()}))}),y.thirdParty.initTealium(y.data.thirdParty.tealium),s(),y.footer&&y.footer.init()},populateActiveMenuCaption:n,populateProductCaption:o}}(jQuery,ux.i18n.header,ux.util,ux.eldorado.delegationUI,ux.eldorado.util);